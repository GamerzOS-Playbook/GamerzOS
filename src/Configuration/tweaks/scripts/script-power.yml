---
title: Configure Power Settings
description: Executes script to configure power settings for the best performance, especially focusing on the lowest latency e.g. by reducing any potential jitter
actions:
    # Disable power saving features
  - !cmd:
    command: '"GamerzOSDesktop\3. General Configuration\Power-saving\Disable Power-saving.cmd" -Silent'
    exeDir: true
    wait: true
    weight: 20
    option: 'disable-power-saving'

    # Disable Fast Startup
  - !registryValue:
    path: 'HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Power'
    value: 'HiberbootEnabled'
    data: '0'
    type: REG_DWORD

    # Disable Hibernation
    # Disabling makes NTFS accessible outside of Windows
  - !cmd:
    command: '"GamerzOSDesktop\3. General Configuration\Hibernation\Disable Hibernation (default).cmd" /silent'
    exeDir: true
    wait: true
    weight: 20
    option: 'disable-hibernation'

      - name: Run GamerzOS PowerShell Script
        shell: powershell
        run: |
          # Self-elevation check is unnecessary in GitHub Actions (already admin)
          
          # Base GUID for Ultimate Performance
          $baseScheme = "e9a42b02-d5df-448d-aa00-03f14749eb61"

          # Step 1: Duplicate the Ultimate Performance plan
          $newScheme = (powercfg -duplicatescheme $baseScheme).Split()[3]

          # Step 2: Rename the new plan to "GamerzOS" with custom description
          $planName = "GamerzOS"
          $planDescription = "GamerzOS – Best For Gaming, Best For Gamers."
          powercfg -changename $newScheme $planName $planDescription

          # Step 3: Set GamerzOS as the active power plan
          powercfg -setactive $newScheme

          # Step 4: Configure key performance settings (AC)
          powercfg -setacvalueindex $newScheme SUB_PROCESSOR PROCTHROTTLEMIN 100
          powercfg -setacvalueindex $newScheme SUB_PROCESSOR PROCTHROTTLEMAX 100
          powercfg -setacvalueindex $newScheme SUB_DISK DISKIDLE 0
          powercfg -setacvalueindex $newScheme SUB_USB USBSELECTIVE 0
          powercfg -setacvalueindex $newScheme SUB_VIDEO VIDEOIDLE 0
          powercfg -setacvalueindex $newScheme SUB_SLEEP STANDBYIDLE 0

          # Optional: Configure battery mode (DC)
          powercfg -setdcvalueindex $newScheme SUB_PROCESSOR PROCTHROTTLEMIN 100
          powercfg -setdcvalueindex $newScheme SUB_PROCESSOR PROCTHROTTLEMAX 100
          powercfg -setdcvalueindex $newScheme SUB_DISK DISKIDLE 0
          powercfg -setdcvalueindex $newScheme SUB_USB USBSELECTIVE 0
          powercfg -setdcvalueindex $newScheme SUB_VIDEO VIDEOIDLE 0
          powercfg -setdcvalueindex $newScheme SUB_SLEEP STANDBYIDLE 0

          # Disable hibernation
          powercfg -hibernate off

          # Apply plan again just in case
          powercfg -setactive $newScheme

          Write-Host "`n✅ Power plan 'GamerzOS' created and optimized successfully!"
          Write-Host "Description: $planDescription"
          Write-Host "GUID: $newScheme"

